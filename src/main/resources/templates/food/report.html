<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
  <meta charset="UTF-8">
  <title>ì˜ì–‘ ë¦¬í¬íŠ¸ | BodyGuard</title>
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  <style>
    body {
      font-family: 'Pretendard', sans-serif;
      background-color: #e0f7f4; /* ì—°í•œ ë¯¼íŠ¸ */
      padding: 40px;
      color: #333;
    }

    h2 {
      text-align: center;
      margin-bottom: 40px;
      font-size: 28px;
      color: #00a591;
      letter-spacing: 1px;
    }

    .chart-container {
      width: 500px;
      margin: auto;
    }

    table {
      margin: 40px auto;
      width: 80%;
      border-collapse: collapse;
      background: #ffffffd0; /* ì•½ê°„ íˆ¬ëª…í•œ í™”ì´íŠ¸ */
      box-shadow: 0 4px 20px rgba(0, 165, 145, 0.1);
      border-radius: 12px;
      overflow: hidden;
    }

    th, td {
      padding: 14px 18px;
      border: 1px solid #d6ece9;
      text-align: center;
      font-size: 15px;
      color: #444;
    }

    th {
      background-color: #f0fdfa;
      color: #009688;
      font-weight: 600;
    }

    caption {
      caption-side: top;
      font-size: 1.2em;
      padding: 14px;
      color: #00897b;
      font-weight: 500;
      letter-spacing: 0.5px;
    }

    .menu-toggle {
      position: fixed;
      top: 20px;
      left: 20px;
      font-size: 26px;
      background: none;
      border: none;
      color: #00897b;
      cursor: pointer;
      z-index: 1001;
    }

    .side-menu {
      position: fixed;
      top: 0;
      left: -250px;
      width: 220px;
      height: 100vh;
      background-color: rgba(255, 255, 255, 0.95);
      box-shadow: 2px 0 8px rgba(0, 165, 145, 0.1);
      padding-top: 80px;
      transition: left 0.3s ease;
      z-index: 1000;
      display: flex;
      flex-direction: column;
      gap: 24px;
      padding-left: 30px;
    }

    .side-menu.active {
      left: 0;
    }

    .menu-item {
      text-decoration: none;
      color: #00695c;
      font-weight: 500;
      font-size: 16px;
      transition: color 0.2s ease;
    }

    .menu-item:hover {
      color: #00a591;
    }

  </style>
</head>
<body>
<button class="menu-toggle" onclick="toggleMenu()">â˜°</button>

<!-- ì™¼ìª½ ì‚¬ì´ë“œ ë©”ë‰´ -->
<div id="sideMenu" class="side-menu">
  <a href="/index" class="menu-item">ğŸ  í™ˆ</a>
  <a href="/food/diary" class="menu-item">ğŸ½ ë‹¤ì´ì–´ë¦¬</a>
  <a href="javascript:history.back()" class="menu-item">â† ë’¤ë¡œê°€ê¸°</a>
</div>

<h2 th:text="${date} + ' ì˜ì–‘ ë¦¬í¬íŠ¸'">2025-04-17 ì˜ì–‘ ë¦¬í¬íŠ¸</h2>

<div class="chart-container">
  <canvas id="nutritionChart" width="400" height="400"></canvas>
</div>

<table>
  <caption style="caption-side: top; font-size: 1.2em; padding: 10px;">ğŸ“Š ì˜ì–‘ì†Œ ì¼ì¼ ì„­ì·¨ ë¦¬í¬íŠ¸</caption>
  <thead>
  <tr>
    <th>ì˜ì–‘ì†Œ</th>
    <th>ì‹¤ì œ ì„­ì·¨ëŸ‰</th>
    <th>ê¶Œì¥ ì„­ì·¨ëŸ‰</th>
    <th>ë‹¬ì„±ë¥ (%)</th>
  </tr>
  </thead>
  <tbody>
  <tr th:each="entry : ${actualEntries}">
    <td th:text="${{calories:'ì¹¼ë¡œë¦¬',carbs:'íƒ„ìˆ˜í™”ë¬¼',protein:'ë‹¨ë°±ì§ˆ',fat:'ì§€ë°©',sugar:'ë‹¹ë¥˜',sodium:'ë‚˜íŠ¸ë¥¨'}[entry.key]}">ì˜ì–‘ì†Œëª…</td>
    <td th:text="${#numbers.formatDecimal(entry.value, 0, 'COMMA', 0, 'POINT')}">0</td>
    <td th:text="${#numbers.formatDecimal(recommended[entry.key], 0, 'COMMA', 0, 'POINT')}">0</td>
    <td th:text="${#numbers.formatDecimal(percent[entry.key], 1, 'COMMA', 0, 'POINT')} + '%'">0%</td>
  </tr>
  </tbody>
</table>

<script th:inline="javascript">
  const percentData = [[${percent}]];
  const labels = ['ì¹¼ë¡œë¦¬', 'íƒ„ìˆ˜í™”ë¬¼', 'ë‹¨ë°±ì§ˆ', 'ì§€ë°©', 'ë‹¹ë¥˜', 'ë‚˜íŠ¸ë¥¨'];
  const keys = ['calories', 'carbs', 'protein', 'fat', 'sugar', 'sodium'];

  const chartData = keys.map(k => percentData[k]);

  const ctx = document.getElementById('nutritionChart').getContext('2d');
  new Chart(ctx, {
    type: 'radar',
    data: {
      labels: labels,
      datasets: [
        {
          label: 'ë‹¬ì„±ë¥  (%)',
          data: chartData,
          fill: true,
          backgroundColor: 'rgba(75, 192, 192, 0.2)',
          borderColor: 'rgb(75, 192, 192)',
          pointBackgroundColor: 'rgb(75, 192, 192)'
        }
      ]
    },
    options: {
      responsive: true,
      scales: {
        r: {
          suggestedMin: 0,
          suggestedMax: 120,
          ticks: {
            stepSize: 20,
            callback: (value) => value + '%'
          }
        }
      },
      plugins: {
        legend: { position: 'top' },
        title: { display: false }
      }
    }
  });
</script>
<script>
  function toggleMenu() {
    const menu = document.getElementById("sideMenu");
    menu.classList.toggle("active");
  }
</script>

</body>
</html>
